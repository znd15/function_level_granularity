



/*
 * super.c
 *
 * PURPOSE
 * Super block routines for the OSTA-UDF(tm) filesystem.
 *
 * DESCRIPTION
 * OSTA-UDF(tm) = Optical Storage Technology Association
 * Universal Disk Format.
 *
 * This code is based on version 2.00 of the UDF specification,
 * and revision 3 of the ECMA 167 standard [equivalent to ISO 13346].
 * http://www.osta.org/
 * http://www.ecma.ch/
 * http://www.iso.org/
 *
 * COPYRIGHT
 * This file is distributed under the terms of the GNU General Public
 * License (GPL). Copies of the GPL can be obtained from:
 * ftp://prep.ai.mit.edu/pub/gnu/GPL
 * Each contributing author retains all rights to their own work.
 *
 * (C) 1998 Dave Boynton
 * (C) 1998-2004 Ben Fennema
 * (C) 2000 Stelias Computing Inc
 *
 * HISTORY
 *
 * 09/24/98 dgb changed to allow compiling outside of kernel, and
 * added some debugging.
 * 10/01/98 dgb updated to allow (some) possibility of compiling w/2.0.34
 * 10/16/98 attempting some multi-session support
 * 10/17/98 added freespace count for "df"
 * 11/11/98 gr added novrs option
 * 11/26/98 dgb added fileset,anchor mount options
 * 12/06/98 blf really hosed things royally. vat/sparing support. sequenced
 * vol descs. rewrote option handling based on isofs
 * 12/20/98 find the free space bitmap (if it exists)
 */

#include "udfdecl.h"

#include <linux/blkdev.h>
#include <linux/slab.h>
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/parser.h>
#include <linux/stat.h>
#include <linux/cdrom.h>
#include <linux/nls.h>
#include <linux/buffer_head.h>
#include <linux/vfs.h>
#include <linux/vmalloc.h>
#include <linux/errno.h>
#include <linux/mount.h>
#include <linux/seq_file.h>
#include <linux/bitmap.h>
#include <linux/crc-itu-t.h>
#include <asm/byteorder.h>

#include "udf_sb.h"
#include "udf_i.h"

#include <linux/init.h>
#include <asm/uaccess.h>

#define VDS_POS_PRIMARY_VOL_DESC 0
#define VDS_POS_UNALLOC_SPACE_DESC 1
#define VDS_POS_LOGICAL_VOL_DESC 2
#define VDS_POS_PARTITION_DESC 3
#define VDS_POS_IMP_USE_VOL_DESC 4
#define VDS_POS_VOL_DESC_PTR 5
#define VDS_POS_TERMINATING_DESC 6
#define VDS_POS_LENGTH 7

#define UDF_DEFAULT_BLOCKSIZE 2048

enum { UDF_MAX_LINKS = 0xffff }