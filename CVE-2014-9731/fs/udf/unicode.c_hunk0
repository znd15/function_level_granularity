



/*
 * unicode.c
 *
 * PURPOSE
 * Routines for converting between UTF-8 and OSTA Compressed Unicode.
 * Also handles filename mangling
 *
 * DESCRIPTION
 * OSTA Compressed Unicode is explained in the OSTA UDF specification.
 * http://www.osta.org/
 * UTF-8 is explained in the IETF RFC XXXX.
 * ftp://ftp.internic.net/rfc/rfcxxxx.txt
 *
 * COPYRIGHT
 * This file is distributed under the terms of the GNU General Public
 * License (GPL). Copies of the GPL can be obtained from:
 * ftp://prep.ai.mit.edu/pub/gnu/GPL
 * Each contributing author retains all rights to their own work.
 */

#include "udfdecl.h"

#include <linux/kernel.h>
#include <linux/string.h>	/* for memset */
#include <linux/nls.h>
#include <linux/crc-itu-t.h>
#include <linux/slab.h>

#include "udf_sb.h"

static int udf_translate_to_linux(uint8_t *, uint8_t *, int, uint8_t *, int);

static int udf_char_to_ustr(struct ustr *dest, const uint8_t *src, int strlen)
{
	if ((!dest) || (!src) || (!strlen) || (strlen > UDF_NAME_LEN - 2))
		return 0;

	memset(dest, 0, sizeof(struct ustr));
	memcpy(dest->u_name, src, strlen);
	dest->u_cmpID = 0x08;
	dest->u_len = strlen;

	return strlen;
}